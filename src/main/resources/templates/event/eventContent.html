<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<div th:fragment="detailContent">
    <div id="imgSlider">
        <div id="sliderContainer">
            <th:block  th:each="event : ${newEvents}">
                <div class="mySlider fade">
                    <th:block th:if="${event.getEventImg() != null}">
                        <img class="slideshowImg" th:src="'data:image/jpeg;base64,' + ${event.getBase64Image()}">
                    </th:block>
                </div>
            </th:block>
        </div>
    </div>

    <div id="eventList">
        <div id="eventHeader">
            <h2>전체 이벤트</h2>
            <button onclick="change('new')">진행 중 이벤트</button>
            <button onclick="change('future')">다가올 이벤트</button>
            <button onclick="change('past')">종료된 이벤트</button>
        </div>
        <div id="newEventBox" class="eventBox">
            <ul class="eventItems">
                <th:block th:each="event : ${newEvents}" >
                    <li class="eventItem">
                        <a th:href="@{/event/detail/{eventNo}(eventNo=${event.getEventNo()})}">
                            <div class="eventImg">
                                <th:block th:if="${event.getEventImg() != null}">
                                    <img th:src="'data:image/jpeg;base64,' + ${event.getBase64Image()}">
                                </th:block>
                                <th:block th:unless="${event.getEventImg() != null}">
                                    <img src="/img/no_image.png">
                                </th:block>
                            </div>
                            <div class="eventDesc">
                                <p class="txt1">[ [[${event.getRestNo().getRestName()}]] ] [[${event.getEventTitle()}]]</p>
                                <p class="txt2">[[${event.getEventStartTime()}]] ~ [[${event.getEventEndTime()}]]</p>
                            </div>
                        </a>
                    </li>
                </th:block>
            </ul>
        </div>

        <div id="pastEventBox" class="eventBox" style="display: none">
            <ul class="eventItems">
                <th:block th:each="event : ${pastEvents}" >
                    <li class="eventItem">
                        <a href="">
                            <div class="eventImg">
                                <th:block th:if="${event.getEventImg() != null}">
                                    <img th:src="'data:image/jpeg;base64,' + ${event.getBase64Image()}">
                                </th:block>
                                <th:block th:unless="${event.getEventImg() != null}">
                                    <img src="/img/no_image.png">
                                </th:block>
                            </div>
                            <div class="eventDesc">
                                <p class="txt1">[ [[${event.getRestNo().getRestName()}]] ] [[${event.getEventTitle()}]]</p>
                                <p class="txt2">[[${event.getEventStartTime()}]] ~ [[${event.getEventEndTime()}]]</p>
                            </div>
                        </a>
                    </li>
                </th:block>
            </ul>
        </div>

        <div id="futureEventBox" class="eventBox" style="display: none">
            <th:block th:if="${futureEvents.size() == 0}" >
                <div style="width:100%; text-align: center; margin : 50px 0;">
                    <h3>죄송합니다.</h3>
                    <p>현재 진행 예정인 이벤트가 없습니다.</p>
                </div>
            </th:block>
            <ul class="eventItems">
                <th:block th:each="event : ${futureEvents}" >
                    <li class="eventItem">
                        <a href="">
                            <div class="eventImg">
                                <th:block th:if="${event.getEventImg() != null}">
                                    <img th:src="'data:image/jpeg;base64,' + ${event.getBase64Image()}">
                                </th:block>
                                <th:block th:unless="${event.getEventImg() != null}">
                                    <img src="/img/no_image.png">
                                </th:block>
                            </div>
                            <div class="eventDesc">
                                <p class="txt1">[ [[${event.getRestNo().getRestName()}]] ] [[${event.getEventTitle()}]]</p>
                                <p class="txt2">[[${event.getEventStartTime()}]] ~ [[${event.getEventEndTime()}]]</p>
                            </div>
                        </a>
                    </li>
                </th:block>
            </ul>
        </div>
    </div>
    <script>
        let slideIndex = 0;
        showSlides();
        function showSlides() {
            let i;
            let slides = document.getElementsByClassName("mySlider");

            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";
            }
            slideIndex++;
            if (slideIndex > slides.length) {
                slideIndex = 1
            }
            slides[slideIndex - 1].style.display = "block";

            setTimeout(showSlides, 2000); // 2초마다 이미지가 체인지됩니다
        }

        function change(period) {
            switch (period) {
                case 'new':
                    document.getElementById("newEventBox").style.display = "block";
                    document.getElementById("pastEventBox").style.display = "none";
                    document.getElementById("futureEventBox").style.display = "none";
                    break;
                case 'future':
                    document.getElementById("newEventBox").style.display = "none";
                    document.getElementById("pastEventBox").style.display = "none";
                    document.getElementById("futureEventBox").style.display = "block";
                    break;
                case 'past':
                    document.getElementById("newEventBox").style.display = "none";
                    document.getElementById("pastEventBox").style.display = "block";
                    document.getElementById("futureEventBox").style.display = "none";
                    break;
            }

        }
    </script>
</div>
</html>