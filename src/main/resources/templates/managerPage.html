<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultrag.net.nz/thymeleaf/layout">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link th:href="@{/css/managerPage/managerPage.css}" rel="stylesheet">
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

<!--<script src="/css/managerPage/managerPage.js"></script>-->
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<body>


<div id="main">

    <div th:include="~{/managerPage/managerPage_sidebar::managerSide}">

    </div>
    <div th:include="${page}::managerContent">

    </div>

</div>

<script>
    function previewImage(input) {
        var preview = document.getElementById('preview');

        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                preview.src = e.target.result;
            };

            reader.readAsDataURL(input.files[0]);
        }
    }


    var dropdown = document.getElementsByClassName("dropdown-btn");
    var i;

    for (i = 0; i < dropdown.length; i++) {
        dropdown[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var dropdownContent = this.nextElementSibling;
            if (dropdownContent.style.display === "block") {
                dropdownContent.style.display = "none";
            } else {
                dropdownContent.style.display = "block";
            }
        });
    }

</script>
<script th:inline="javascript">
    var userAddButton = document.getElementById('userAddButton');
    //추가버튼
    if (userAddButton)
        userAddButton.addEventListener('click', function () {
            window.location.href = '/manager/managerPage_UAdd';
        });

    //디테일로 이동 버튼
    function redirectToUserUpdate(userNo) {
        window.location.href = '/manager/managerPage_UDetail?userNo=' + userNo;
    }



    var userDelButton = document.getElementById('UDel');


    function confirmBlack(my) {
        let confirmation = confirm("블랙을 푸시겠습니까?");
        let form = document.getElementById("blackForm");
        let confirmInput = my.parentNode.querySelector("input[name=confirm]");
        confirmInput.value = confirmation;

        form.submit();

    }

    // ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡqaㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ


    function redirectToQA(id) {
        window.location.href = '/manager/managerPage_QAAnswer?id=' + id;
    }

    // ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ공지사항ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ

    //디테일로 이동 버튼
    function redirectToNoticeDetail(id) {
        window.location.href = '/manager/managerPage_NoticeDetail?id=' + id;
    }

    var noticeAddBtn = document.getElementById('noticeAdd');
    //추가버튼
    if (noticeAddBtn)
        noticeAddBtn.addEventListener('click', function () {
            window.location.href = '/manager/managerPage_NoticeAdd';
        });


    //------------------------------점주-------------------------------


    var jumAddButton = document.getElementById('JumAddButton');

    if (jumAddButton)
        jumAddButton.addEventListener('click', function () {

            window.location.href = 'managerPage_JAdd';
        });

    function redirectToJumDetail(restNo) {
        window.location.href = '/manager/managerPage_JDetail?userNo=' + restNo;
    }

    function redirectToJumrestDetail(restNo) {
        window.location.href = '/manager/managerPage_JrestDetail?restNo=' + restNo;
    }


    // function search() {
    //     var input, filter, table, tr, td, i;
    //     input = document.getElementById("searchInput");
    //     filter = input.value.toUpperCase();
    //     table = document.getElementById("dinningTable");
    //     tr = table.getElementsByTagName("tr");
    //
    //     for (i = 0; i < tr.length; i++) {
    //         td = tr[i].getElementsByTagName("td")[1]; // 두 번째 열에 해당하는 가게 이름으로 필터링
    //         if (td) {
    //             if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
    //                 tr[i].style.display = "";
    //             } else {
    //                 tr[i].style.display = "none";
    //             }
    //         }
    //     }
    // }

    document.getElementById("searchInput").addEventListener("input", function () {
        var filter, table, tr, td, i;
        filter = this.value.toUpperCase();
        table = document.getElementById("dinningTable");
        tr = table.getElementsByTagName("tr");

    function searchDinning() {
        let searchInput = document.getElementById("searchInput").value;
        // AJAX를 통해 검색어를 서버로 전송
        // var xhr = new XMLHttpRequest();
        // xhr.open("GET", "/manager/managerPage_JrestInfo?searchInput=" + searchInput, true);
        // xhr.onreadystatechange = function () {
        //     if (xhr.readyState == 4 && xhr.status == 200) {
        //         // 검색 결과를 받아와서 페이지에 표시
        //         document.getElementById("dinningTable").innerHTML = xhr.responseText;
        //     }
        // };
        // xhr.send();
        gv = [];
        fetch("/manager/managerPage_JrestInfo?searchInput=" + searchInput)
            .then(resp => resp.text())
            .then(data => {
                let doc = new DOMParser().parseFromString(data, 'text/html');
                document.getElementById("dinningTable").innerHTML = doc.getElementById("dinningTable").innerHTML
        });
    }






</script>

</body>
</html>