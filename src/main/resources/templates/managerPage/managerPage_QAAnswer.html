<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>문의, 답변</title>
</head>

<div th:fragment="managerContent">
    <div id="right2">

        <style>

            .an {
                margin: auto;
            }

            .an2 form p {
                margin-bottom: 15px;
            }

            .an2 label {
                font-weight: bold;
                display: block;
                float: left;
            }

            .an2 input[type="text"],
            .an2 textarea {
                width: 100%;
                border-radius: 5px;
                border: none;
            }

            .an2 textarea {
                resize: vertical;
            }

            .an2 h2 {
                float: left;
                margin-left: 10px;
                margin-top: 10px;
            }

            ion-icon:hover {
                cursor: pointer;
            }

            .an2D {
                border: solid 1px white;

                width: 500px;
                margin: 0 auto;
            }
        </style>
        <ion-icon style="float:right; font-size: 40px" onclick="history.go(-1);" name="close-outline"></ion-icon>

        <div class="an2">

            <h2>문의 내용</h2>
            <br>
            <hr>
            <div class="an2D">
<!--                <p>-->
<!--                    <label>번호 :-->
<!--                        <input type="text" th:value="${qa.get().id}" readonly></input></label>-->
<!--                </p>-->
<!--                <p>-->
<!--                    <label>제목 :-->
<!--                        <input type="text" th:value="${qa.get().qaTitle}" readonly></input></label>-->
<!--                </p>-->
<!--                <p>-->
<!--                    <label>작성자 :-->
<!--                        <input type="text" th:value="${qa.get().userNo.userName}" readonly></input></label>-->
<!--                </p>-->
<!--                <p>-->
<!--                    <label>내용 : </label>-->
<!--                    <textarea cols="30" rows="10" th:value="${qa.get().qaContent}" readonly></textarea>-->
<!--                </p>-->

                <div>
                <p th:text="'번호 : ' + ${qa.get().id}"></p>
                <p th:text="'제목 : ' + ${qa.get().qaTitle}"></p>
                <p th:text="'작성자 : ' + ${qa.get().userNo.userName}"></p>
                <p th:text="'내용 : ' + ${qa.get().qaContent}"></p>
                </div>

            </div>
        </div>

        <div class="an">
            <h2>답변</h2>
            <hr>
            <form id="answerForm" action="managerPage_QARequest" method="post">
                <input type="hidden" name="id" th:value="${qa.get().id}"/>
                <p>
                    <label for="title">제목 :</label><br>
                    <input type="text" name="title" id="title">
                </p>
                <p>
                    <label for="content">답변 내용 :</label><br>
                    <textarea name="content" id="content" cols="30" rows="10"></textarea>
                </p>

                <p class="ps">
                    <input class="fifth" type="submit" value="등록">
                </p>
            </form>
        </div>
    </div>

</div>

<script th:inline="javascript">
    document.querySelector(".fifth").addEventListener("click", function (event) {
        event.preventDefault(); // 기본 동작 방지

        const title = document.getElementById("title").value;
        const content = document.getElementById("content").value;

        if (title === '' || content === '') {
            swal("모든 항목을 입력하세요 :)");
            return;
        }

        swal({
            title: "답변 등록",
            text: "답변을 등록하시겠습니까?",
            icon: "info",
            buttons: {
                confirm: {
                    text: "확인",
                    value: true,
                    visible: true,
                    className: "confirm-button",
                    closeModal: true
                },
                cancel: {
                    text: "취소",
                    value: null,
                    visible: true,
                    className: "cancel-button",
                    closeModal: true,
                }
            },
            dangerMode: false
        }).then((willAdd) => {
            if (willAdd) {
                swal("Success!", "${qa.get().qaTitle} 에 대한 답변이 등록 되었습니다.", "success")
                    .then(function () {
                        document.getElementById("answerForm").submit();
                    });
            } else {
                swal("등록이 취소 되었습니다.")
            }
        });
    });

</script>
</div>
</html>
